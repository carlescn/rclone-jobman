#!/usr/bin/env bash

###################################################################
# Script Name : rclone-jobman
# Description : Simple sync-job manager for rclone.
# Args        : [None]
#                 Runs interactively with a simple text menu.
#                 It load the available jobs from the files in
#                 ~/.config/rclone-jobman/jobs
#               [job_file_name]
#                 The file must exist in ~/.config/rclone-jobman/jobs.
#                 It runs the corresponding job without asking for user input
#                 (intended for automation).
# Author      : CarlesCN
# E-mail      : carlesbioinformatics@gmail.com
# License     : GNU General Public License v3.0
###################################################################

# -e script ends on error (exit != 0)
# -u error if undefined variable
# -o pipefail script ends if piped command fails
set -euo pipefail

SCRIPT_DIR="$(dirname "$(realpath "$0")")"

# If some arguments, launch runner. If no arguments, launch TUI
if [ $# -gt 0 ]; then
    /usr/bin/env bash -c "$SCRIPT_DIR/rclone-tasks-runner.sh $*"
else
    /usr/bin/env bash -c "$SCRIPT_DIR/rclone-tasks-tui.sh"
fi
